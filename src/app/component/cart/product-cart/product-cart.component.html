<div class="group w-64 cursor-pointer relative" (click)="navigate()">

  <!-- Card -->
  <div class="bg-white rounded-xl shadow-md border border-gray-300
              hover:shadow-2xl transition-all duration-300 flex flex-col h-full">

    <!-- Image -->
    <div class="relative w-full h-60 overflow-hidden rounded-t-xl flex-shrink-0">
      <img [src]="imgUrl" alt="productName"
           class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" />

      <!-- Hover overlay -->
      <div class="absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 gap-4">
  <button (click)="toggleLike($event)" 
          class="flex items-center justify-center w-12 h-12 rounded-full bg-white shadow hover:scale-110 transition duration-300">
    <mat-icon [ngClass]="liked ? 'text-red-500' : 'text-gray-600'" class="text-xl">
      favorite
    </mat-icon>
  </button>
  <button (click)="$event.stopPropagation()" 
          class="flex items-center justify-center w-12 h-12 rounded-full bg-white shadow hover:scale-110 transition duration-300">
    <mat-icon class="text-gray-600 text-xl">share</mat-icon>
  </button>
      </div>
      
    </div>



    <!-- Content -->
    <div class="flex flex-col gap-1 p-4 flex-grow">

      <!-- Product Name -->
      <h4 class="font-medium text-lg text-primary line-clamp-2 min-h-[60px]">
        {{ productName }}
      </h4>

      <!-- Description -->
      <p class="text-sm text-gray-500 line-clamp-2 min-h-[40px]">
        {{ productDesc }}
      </p>

      <!-- Rating stars -->
      <div class="flex items-center mt-1">
        <mat-icon *ngFor="let star of starsArray()" class="text-yellow-400 text-lg">
          {{ star ? 'star' : 'star_outline' }}
        </mat-icon>
        <p class="text-sm text-gray-500 ml-1">({{ reviewCount }} reviews)</p>
      </div>

      <!-- Price -->
      <div class="flex items-end gap-3 mt-2">
        <p *ngIf="OPrice" class="text-sm text-gray-400 line-through">
          Rs. {{ OPrice }}
        </p>
        <p class="text-xl font-medium text-primary">{{ NPrice | currency:'LKR':'symbol' }}</p>
      </div>

      <!-- Add to Cart -->
      <button (click)="handleCart($event)" 
              class="mt-4 flex items-center justify-center gap-2 bg-secondary hover:bg-primary
                     text-white py-2 rounded-lg font-semibold shadow transition active:scale-95">
        <mat-icon>shopping_cart</mat-icon>
        Add To Cart
      </button>

    </div>
  </div>
</div>
